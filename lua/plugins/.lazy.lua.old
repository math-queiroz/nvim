local plugins = {
	-- colorscheme
	require(
	{ 
		"ellisonleao/gruvbox.nvim",
		priority = 1000,
		init = function()
			require('util').hide_bg()
			vim.cmd('colorscheme gruvbox')
		end
	},
	-- dependencies
	{ 'nvim-lua/plenary.nvim' },
	{ 'rafamadriz/friendly-snippets' },
	{ 'saadparwaiz1/cmp_luasnip', ft='lua' },
	{ 'L3MON4D3/LuaSnip', ft='lua',
	  dependencies = { 'rafamadriz/friendly-snippets' }
	},
	-- core
	{
		'hrsh7th/nvim-cmp',
		lazy = true,
		config = function()
			local opts = require('plugins.config.cmp')
			require('cmp').setup(opts.get())
		end
	},
	{
		'norcalli/nvim-colorizer.lua',
		ft = 'css',
		lazy = true,
		config = function()
			local opts = require('plugins.config.colorizer')
			require('colorizer').setup(opts.get())
		end
	},
	{
		'numToStr/Comment.nvim',
		lazy = true,
		keys = require('plugins.config.comment').keys,
		config = function()
			local opts = require('plugins.config.comment')
			require('Comment').setup(opts.config())
		end,
	},
	{
		'nvim-lualine/lualine.nvim',
		lazy = false,
		config = function()
			local opts = require('plugins.config.lualine')
			require('lualine').setup(opts.get())
		end
	},
	{
		'williamboman/mason.nvim',
		lazy = true,
		config = function()
			local opts = require('plugins.config.mason')
			require('mason').setup(opts.get())
		end,
	},
	{
		'nvim-tree/nvim-tree.lua',
		lazy = true,
		keys = require('plugins.config.nvim-tree').keys,
		config = function()
			local config = require('plugins.config.nvim-tree')
			require('nvim-tree').setup(config.config())
		end
	},
	{
		'nvim-telescope/telescope.nvim',
		lazy = true,
		config = function()
			local opts = require('plugins.config.telescope')
			require('telescope').setup(opts.get())
		end,
	},
	{
		'folke/which-key.nvim',
		lazy = false,
		config = function()
			vim.o.timeout = true
			vim.o.timeoutlen = 500
		end,
	},
}

local lazypath = vim.fn.stdpath('data') .. '/lazy/lazy.nvim'
if not vim.loop.fs_stat(lazypath) then
	vim.fn.system({
		'git',
		'clone',
		'--filter=blob:none',
		'https://github.com/folke/lazy.nvim.git',
		'--branch=stable', -- latest stable release
		lazypath,
	})
end
vim.opt.rtp:prepend(lazypath)

require('lazy').setup(plugins, {
	defaults = { lazy = true },
	install = { colorscheme = { 'default' } },
	ui = { border = 'single' }
})
